<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>1950, í¬ë§ì„ ì°¾ì•„ì„œ - ë°©íƒˆì¶œ</title>
    <style>
        /* CSSëŠ” ì´ì „ê³¼ ë™ì¼í•˜ì—¬ ìƒëµ... */
        body,html{margin:0;padding:0;width:100%;height:100%;background-color:#1a1a1a;color:#fff;font-family:'Malgun Gothic','Apple SD Gothic Neo',sans-serif;overflow:hidden;display:flex;justify-content:center;align-items:center}#timer-display{position:fixed;top:20px;left:50%;transform:translateX(-50%);background-color:rgba(0,0,0,.8);padding:10px 25px;border-radius:10px;font-size:1.8em;font-weight:700;color:#f1c40f;font-family:'Courier New',Courier,monospace;z-index:100;border:2px solid #555}#start-screen{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;width:100%;height:100%;background-color:#2c3e50}#start-screen h1{font-size:2.5em;color:#f1c40f;margin-bottom:10px}#start-screen h2{font-size:1.2em;color:#ecf0f1;margin-top:0;margin-bottom:40px}.input-group{margin-bottom:20px}.input-group label{margin-right:10px;font-size:1.1em}.input-group input{padding:10px;font-size:1em;border-radius:5px;border:none;width:100px;text-align:center}#start-button{padding:15px 40px;font-size:1.5em;font-weight:700;border:none;border-radius:10px;color:#fff;background-color:#27ae60;cursor:pointer;transition:background-color .3s}#start-button:hover{background-color:#2ecc71}#game-container{position:relative;max-width:1280px;max-height:720px;width:100%;aspect-ratio:1280/720}#game-container img{width:100%;height:100%;display:block}.hidden{display:none!important}#modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.85);display:flex;justify-content:center;align-items:center;z-index:1000;padding:15px;box-sizing:border-box}#modal-content{background-color:#2c3e50;padding:25px;border-radius:15px;width:90%;max-width:500px;text-align:center;border:3px solid #bdc3c7;box-shadow:0 0 25px rgba(255,255,255,.1)}#modal-title{margin-top:0;color:#f1c40f;font-size:1.5em}#modal-body div,#modal-body h3,#modal-body p{font-size:1.1em;line-height:1.6}#modal-content input,#modal-content textarea{padding:12px;margin:15px 0;width:80%;border-radius:5px;border:1px solid #777;background-color:#ecf0f1;font-size:1em;text-align:center;color:#333;box-sizing:border-box}#modal-content textarea{text-align:left;height:100px}#modal-content button{padding:12px 25px;border-radius:8px;border:none;background-color:#27ae60;color:#fff;cursor:pointer;font-size:1em;margin:5px;transition:background-color .3s}#modal-content button:hover{background-color:#2ecc71}#modal-content button.close-btn{background-color:#c0392b}#modal-content button.close-btn:hover{background-color:#e74c3c}#clue-display{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background-color:rgba(0,0,0,.85);padding:15px 25px;border-radius:10px;font-size:1.6em;border:2px solid #555;z-index:50;text-align:center}#clue-slots{letter-spacing:15px;font-family:'Courier New',Courier,monospace;font-weight:700;color:#f1c40f;font-size:1.2em}#memory-game-board{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:20px auto;max-width:300px}.card{width:80px;height:80px;background-color:#34495e;border:2px solid #fff;border-radius:8px;cursor:pointer;position:relative;transform-style:preserve-3d;transition:transform .6s}.card.flipped{transform:rotateY(180deg)}.card-face{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:flex;justify-content:center;align-items:center;font-size:2.5em;border-radius:6px}.card-front{background-color:#34495e}.card-back{background-color:#95a5a6;transform:rotateY(180deg)}.card.matched{border-color:#27ae60;cursor:default;transform:rotateY(180deg);opacity:.7}
    </style>
</head>
<body>
    <div id="start-screen">
        <!-- ì‹œì‘ í™”ë©´ HTML (ë³€ê²½ ì—†ìŒ) -->
        <h1>1950, í¬ë§ì„ ì°¾ì•„ì„œ</h1><h2>ì°¸ê°€ì ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”.</h2><div class="input-group"><label for="student-grade">í•™ë…„:</label><input type="number" id="student-grade" placeholder="ì˜ˆ: 6"><label for="student-class">ë°˜:</label><input type="number" id="student-class" placeholder="ì˜ˆ: 1"></div><div class="input-group"><label for="student-name">ì´ë¦„:</label><input type="text" id="student-name" placeholder="ì˜ˆ: í™ê¸¸ë™"></div><button id="start-button">ê²Œì„ ì‹œì‘</button>
    </div>
    <div id="timer-display" class="hidden">00:00</div>
    <div id="game-container" class="hidden">
        <!-- ê²Œì„ í™”ë©´ HTML (ë³€ê²½ ì—†ìŒ) -->
        <img src="https://i.ibb.co/kRJxvdK/Whisk-ty1ntdhmzc.jpg" alt="ìŒì•…ì‹¤ ë°°ê²½" usemap="#gamemap"><map name="gamemap"><area shape="rect" coords="85,80,180,170" href="#" alt="ì™¼ìª½ ìœ„ ì•¡ì" onclick="showEvent('frame')"><area shape="rect" coords="90,370,610,510" href="#" alt="í‚¤ë³´ë“œ" onclick="showEvent('keyboard')"><area shape="rect" coords="0,350,220,620" href="#" alt="ì™¼ìª½ ìŠ¤í”¼ì»¤" onclick="showEvent('speaker')"><area shape="rect" coords="680,450,870,850" href="#" alt="ì˜¤ë¥¸ìª½ ê¸°íƒ€" onclick="showEvent('guitar')"><area shape="rect" coords="430,135,570,335" href="#" alt="ì¤‘ì•™ ì•¡ì" onclick="showEvent('final_lock')"></map>
    </div>
    <div id="modal-overlay" class="hidden">
        <div id="modal-content">
            <h2 id="modal-title"></h2>
            <div id="modal-body"></div>
            <div id="modal-buttons"></div> <!-- ë²„íŠ¼ ì˜ì—­ì„ ë”°ë¡œ ë§Œë“¦ -->
        </div>
    </div>
    <div id="clue-display" class="hidden"><div>í¬ë§ì˜ ì•”í˜¸</div><div id="clue-slots">____</div></div>

    <script>
        // --- JavaScript ê²Œì„ ë¡œì§ ---

        // ===== 1. Apps Script URLì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”! =====
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzREJ6P_aQdM4vdteaGbXU_68p1Cn67974ikg34GnRuigIq0VEADICHsAfK-ICcXzakGw/exec"; 
        
        // HTML ìš”ì†Œ (modalButtons ì¶”ê°€)
        const startScreen = document.getElementById('start-screen'), startButton = document.getElementById('start-button'), gameContainer = document.getElementById('game-container'), clueDisplay = document.getElementById('clue-display'), timerDisplay = document.getElementById('timer-display'), modalOverlay = document.getElementById('modal-overlay'), modalTitle = document.getElementById('modal-title'), modalBody = document.getElementById('modal-body'), modalButtons = document.getElementById('modal-buttons'), clueSlots = document.getElementById('clue-slots');
        
        // ê²Œì„ ìƒíƒœ ê´€ë¦¬ (finalTime ì¶”ê°€)
        let timerInterval = null;
        const gameState = { startTime: 0, finalTime: '', playerGrade: '', playerClass: '', playerName: '', clues: { frame: null, keyboard: null, speaker: null, guitar: null }, password: ['_', '_', '_', '_'] };

        // startGame, updateTimer, showEvent, checkAnswer, updateClueDisplay í•¨ìˆ˜ëŠ” ì´ì „ê³¼ ë™ì¼
        function startGame(){const e=document.getElementById("student-grade"),t=document.getElementById("student-class"),n=document.getElementById("student-name");if(""===n.value.trim())return alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!"),void n.focus();gameState.playerGrade=e.value||"ë¯¸ì…ë ¥",gameState.playerClass=t.value||"ë¯¸ì…ë ¥",gameState.playerName=n.value.trim(),gameState.startTime=Date.now(),timerInterval=setInterval(updateTimer,1e3),startScreen.classList.add("hidden"),gameContainer.classList.remove("hidden"),clueDisplay.classList.remove("hidden"),timerDisplay.classList.remove("hidden")}function updateTimer(){const e=Date.now()-gameState.startTime,t=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60);timerDisplay.innerText=`${String(n).padStart(2,"0")}:${String(t).padStart(2,"0")}`}startButton.addEventListener("click",startGame);function showEvent(e){if(gameState.clues[e]&&"final_lock"!==e)return void alert("ì´ê³³ì—ì„œëŠ” ë” ì´ìƒ ì°¾ì„ ê²ƒì´ ì—†ìŠµë‹ˆë‹¤.");switch(modalOverlay.classList.remove("hidden"),modalButtons.innerHTML='<button class="close-btn" onclick="closeModal()">ë‹«ê¸°</button>',e){case"frame":modalTitle.innerText="ë‚¡ì€ ì•¡ì",modalBody.innerHTML="<p>ë¨¼ì§€ ë‚€ ì•¡ì ì†ì—ëŠ” ë¹„ë‘˜ê¸° ê·¸ë¦¼ì´ ìˆë‹¤...</p><p>ìì„¸íˆ ë³´ë‹ˆ 'ì†Œì›'ì´ë¼ëŠ” ë‹¨ì–´ì—ì„œ <strong>ìˆ«ì 0</strong>ì´ ë³´ì´ëŠ” ê²ƒ ê°™ë‹¤.</p>",gameState.clues.frame||(gameState.clues.frame="0",updateClueDisplay());break;case"keyboard":modalTitle.innerText="ğŸ¹ ê±´ë°˜ì˜ ì§ˆë¬¸",modalBody.innerHTML='<p>íœ´ì „ í˜‘ì •ì´ ë§ºì–´ì§„ í•´ëŠ” 1953ë…„ì…ë‹ˆë‹¤.</p><p><strong>ë¬¸ì œ:</strong> ì´ í•´ì˜ ë§ˆì§€ë§‰ ë‘ ìˆ«ìë¥¼ ì„œë¡œ ë¹¼ë©´(í° ìˆ˜ - ì‘ì€ ìˆ˜) ì–¼ë§ˆì¼ê¹Œìš”?</p><input type="number" id="keyboard-answer" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”"><button onclick="checkAnswer(\'keyboard\', document.getElementById(\'keyboard-answer\').value)">í™•ì¸</button>';break;case"speaker":modalTitle.innerText="ğŸ”Š ê¸°ì–µë ¥ ì‹œí—˜",modalBody.innerHTML="<p>ìŠ¤í”¼ì»¤ì—ì„œ ì§€ì§€ì§ê±°ë¦¬ëŠ” ì†Œë¦¬ê°€ ë“¤ë¦°ë‹¤...</p><p>ê°™ì€ ê·¸ë¦¼ ì¹´ë“œë¥¼ ì°¾ì•„ ì§ì„ ë§ì¶”ì„¸ìš”!</p><div id=\"memory-game-board\"></div>",initMemoryGame();break;case"guitar":modalTitle.innerText="ğŸ¸ ê¸°íƒ€ì— ë‚¨ê²¨ì§„ ìˆ«ì",modalBody.innerHTML='<p>ê¸°íƒ€ ëª¸ì²´ì— í¬ë¯¸í•˜ê²Œ ê¸€ìê°€ ìƒˆê²¨ì ¸ ìˆë‹¤...</p><p>"êµ°ë²ˆ 1234-63. ê¼­ ëŒì•„ê°„ë‹¤."</p><p><strong>ë¬¸ì œ:</strong> êµ°ë²ˆì˜ ë§ˆì§€ë§‰ ë‘ ìˆ«ìë¥¼ ë”í•˜ë©´ ì–¼ë§ˆì¼ê¹Œìš”?</p><input type="number" id="guitar-answer" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”"><button onclick="checkAnswer(\'guitar\', document.getElementById(\'guitar-answer\').value)">í™•ì¸</button>';break;case"final_lock":modalTitle.innerText="ğŸ” í¬ë§ì˜ ë¬¸",modalBody.innerHTML='<p>ì§€ê¸ˆê¹Œì§€ ì°¾ì€ 4ê°œì˜ í¬ë§ì˜ ì•”í˜¸ë¥¼ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•˜ë©´ ë¬¸ì´ ì—´ë¦´ ê²ƒì´ë‹¤.</p><input type="text" id="final-password" placeholder="ë¹„ë°€ë²ˆí˜¸ 4ìë¦¬" maxlength="4" style="letter-spacing: 5px;"><button onclick="checkFinalPassword()">ì—´ê¸°</button>'}}function checkAnswer(e,t){let n=!1,s=null;("keyboard"!==e||2!==parseInt(t))&&("guitar"!==e||9!==parseInt(t))||(n=!0,s="keyboard"===e?"2":"9"),n?(alert("ì •ë‹µì…ë‹ˆë‹¤! í¬ë§ì˜ ì•”í˜¸ ì¡°ê°ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤!"),gameState.clues[e]=s,closeModal(),updateClueDisplay()):alert("í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ í•œë²ˆ ìƒê°í•´ë³´ì„¸ìš”.")}function updateClueDisplay(){gameState.clues.frame&&(gameState.password[0]=gameState.clues.frame),gameState.clues.keyboard&&(gameState.password[1]=gameState.clues.keyboard),gameState.clues.speaker&&(gameState.password[2]=gameState.clues.speaker),gameState.clues.guitar&&(gameState.password[3]=gameState.clues.guitar),clueSlots.innerText=gameState.password.join("")}

        // ===== 2. ìµœì¢… ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ë° ì„±ê³µ í™”ë©´ êµ¬ì„± (ìˆ˜ì •ë¨) =====
        function checkFinalPassword() {
            if (document.getElementById('final-password').value === '0229') {
                clearInterval(timerInterval);
                timerDisplay.classList.add('hidden');

                const elapsedTime = Date.now() - gameState.startTime;
                const minutes = Math.floor(elapsedTime / 60000);
                const seconds = Math.floor((elapsedTime % 60000) / 1000);
                gameState.finalTime = `${minutes}ë¶„ ${seconds}ì´ˆ`; // ì†Œìš”ì‹œê°„ ì €ì¥

                modalTitle.innerText = "ğŸ‰ íƒˆì¶œ ì„±ê³µ! ğŸ‰";
                modalBody.innerHTML = `
                    <div style="text-align: left; padding: 0 10%;">
                        <h3 style="text-align: center;">- í´ë¦¬ì–´ ê¸°ë¡ -</h3>
                        <p><strong>ì°¸ê°€ì:</strong> ${gameState.playerGrade}í•™ë…„ ${gameState.playerClass}ë°˜ ${gameState.playerName}</p>
                        <p><strong>ì†Œìš” ì‹œê°„:</strong> ${gameState.finalTime}</p>
                    </div><hr>
                    <h3 style="margin-top: 20px;">ê²Œì„ ì°¸ì—¬ ì†Œê°</h3>
                    <textarea id="feedback-text" placeholder="ì¬ë¯¸ìˆì—ˆë˜ ì ì´ë‚˜ ëŠë‚€ ì ì„ ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”."></textarea>
                `;
                // ë²„íŠ¼ ì˜ì—­ì„ ìƒˆë¡œ êµ¬ì„±
                modalButtons.innerHTML = `
                    <button id="submit-btn" onclick="submitFeedback()">ê¸°ë¡ ì €ì¥í•˜ê¸°</button>
                    <button class="close-btn" onclick="window.location.reload()">ë‹¤ì‹œí•˜ê¸°</button>
                `;
            } else {
                alert('ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤. ì•”í˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ë³´ì„¸ìš”.');
            }
        }
        
        // ===== 3. êµ¬ê¸€ ì‹œíŠ¸ë¡œ ë°ì´í„° ì „ì†¡ í•¨ìˆ˜ (ìƒˆë¡œ ì¶”ê°€) =====
        function submitFeedback() {
            const feedbackText = document.getElementById('feedback-text').value;
            const submitButton = document.getElementById('submit-btn');

            // ë²„íŠ¼ ë¹„í™œì„±í™” (ì¤‘ë³µ ì œì¶œ ë°©ì§€)
            submitButton.disabled = true;
            submitButton.innerText = "ì €ì¥ ì¤‘...";

            const data = {
                grade: gameState.playerGrade,
                class: gameState.playerClass,
                name: gameState.playerName,
                time: gameState.finalTime,
                feedback: feedbackText
            };

            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // ì¤‘ìš”: no-cors ëª¨ë“œë¡œ ë³€ê²½
                cache: 'no-cache',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => {
                // no-cors ëª¨ë“œì—ì„œëŠ” ìƒì„¸í•œ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ì—†ì§€ë§Œ, ìš”ì²­ ìì²´ëŠ” ë³´ë‚´ì§‘ë‹ˆë‹¤.
                alert('ê¸°ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!');
                submitButton.innerText = "ì €ì¥ ì™„ë£Œ";
            })
            .catch(error => {
                alert('ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬ ê¸°ë¡ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                console.error('Error!', error.message);
                submitButton.disabled = false;
                submitButton.innerText = "ê¸°ë¡ ì €ì¥í•˜ê¸°";
            });
        }

        function closeModal() {
            modalOverlay.classList.add('hidden');
        }

        // ë©”ëª¨ë¦¬ ê²Œì„ ë¡œì§ (ë³€ê²½ ì—†ìŒ)
        let memoryGameActive=!1,flippedCards=[],matchedPairs=0;function initMemoryGame(){memoryGameActive=!0,flippedCards=[],matchedPairs=0;const e=document.getElementById("memory-game-board");e.innerHTML="";const t=["ğŸ‡°ğŸ‡·","ğŸ•Šï¸","ğŸŒº","ğŸ‡°ğŸ‡·","ğŸ•Šï¸","ğŸŒº"];for(let n=t.length-1;n>0;n--){const s=Math.floor(Math.random()*(n+1));[t[n],t[s]]=[t[s],t[n]]}t.forEach(t=>{const n=document.createElement("div");n.classList.add("card"),n.dataset.symbol=t,n.innerHTML='<div class="card-face card-front"></div><div class="card-face card-back">'+t+"</div>",n.addEventListener("click",()=>flipCard(n)),e.appendChild(n)})}function flipCard(e){if(memoryGameActive&&flippedCards.length<2&&!e.classList.contains("flipped"))e.classList.add("flipped"),flippedCards.push(e),2===flippedCards.length&&checkForMatch()}function checkForMatch(){const[e,t]=flippedCards;e.dataset.symbol===t.dataset.symbol?(e.classList.add("matched"),t.classList.add("matched"),matchedPairs++,flippedCards=[],3===matchedPairs&&(memoryGameActive=!1,setTimeout(()=>{alert("ì„±ê³µ! ìŠ¤í”¼ì»¤ì—ì„œ í¬ë¯¸í•œ ëª©ì†Œë¦¬ê°€ ë“¤ë¦°ë‹¤... 'í¬ë§ì˜ ì„¸ ë²ˆì§¸ ìˆ«ìëŠ”... 2...'"),gameState.clues.speaker="2",closeModal(),updateClueDisplay()},500))):(memoryGameActive=!1,setTimeout(()=>{e.classList.remove("flipped"),t.classList.remove("flipped"),flippedCards=[],memoryGameActive=!0},1e3))}
    </script>
</body>
</html>